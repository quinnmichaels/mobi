function escapeJSONString(e,t){return typeof t=="string"?t.replace(/[^ -~\b\t\n\f\r"\\]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t}function JSONStringify(e){return JSON.stringify(e,escapeJSONString).replace(/\\\\u([\da-f]{4}?)/g,"\\u$1")}var http=require("http"),https=require("https"),request=require("request"),express=require("express"),mongo=require("mongodb"),Redmine=require("Redmine"),exphbs=require("../"),hbsHelpers=require("./hbs_helpers"),app=express(),port=9300,hbs=exphbs.create({defaultLayout:"main",helpers:hbsHelpers,extname:".hbs",partialsDir:"views/_partials/",layoutsDir:"views/_layouts/"});app.engine("hbs",hbs.engine);app.set("view engine","hbs");app.get("/issue/:issueID",function(e,t){var n=e.param("issueID"),r=e.query.key,i=e.query.red+"/issues/"+n+".json?include=journals",s="http://q.dev/mobi/_cfc/mobi.cfc?method=callRedMine&key="+r+"&redURL="+i,o={uri:s,json:!0,headers:{"X-Redmine-API-Key":r}};request(s,o,function(e,n,r){!e&&n.statusCode==200?t.json(r):console.log(n)})});app.get("/users",function(e,t){t.send("getting users")});app.get("/sites",function(e,t){request("http://www.google.com",function(e,n,r){if(!e&&n.statusCode==200){console.log(r);t.end(r)}})});app.use(express.static("public"));app.listen(port);console.log("Listening on port "+port+"....");