//! ----- card defaults -----
@cardW: 225px;
@cardH: 290px;

@panel-width: 250px;
@panel-height: 300px;

@ui-color-1: lighten(black, 10%);
@ui-color-2: lighten(black, 25%);

@menu-color-1: #3f72b1;
@menu-color-2: darken(@menu-color-1, 10%);
//! ----- global font -----
.global-font () {
	font-family: 'HelveticaNeue-Light', 'HelveticaNeue', Helvetica, Arial, sans-serif;
};

//! ----- button defaults -----
.b-ok () {
	@color1: #1678ce;
	@color2: #1064ae;
}
.b-cancel () {
	@color1: #cf1717;
	@color2: #ae1010;
}
.b-defaults () {
	border: none;
	color: lighten(@color1, 40%);
	text-shadow: 0 -1px 1px darken(@color1, 30%);
	border-top: 1px solid lighten(@color1, 15%);
	border-bottom: 1px solid darken(@color2, 5%);
	.gradient(@color1; @color2);

	&:hover {
		.gradient(lighten(@color1, 3%); lighten(@color2, 3%));
	}
	&:active {
		.gradient(darken(@color2, 3%); darken(@color1, 3%));
		color: lighten(@color1, 40%);
	}
}
.button-ok () {
	.b-ok();
	.radius(3px);
	.b-defaults();
}
.button-cancel () {
	.b-cancel();
	.radius(3px);
	.b-defaults();
}

//! ----- gradients -----
.gradient (@grad1: @ui-color-1; @grad2: @ui-color-2; @percent: 100%) {
	background: @grad1; /* Old browsers */
	background: -moz-linear-gradient(top,  @grad1 0%, @grad2 @percent); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,@grad1), color-stop(@percent,@grad2)); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  @grad1 0%,@grad2 @percent); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  @grad1 0%,@grad2 @percent); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  @grad1 0%,@grad2 @percent); /* IE10+ */
	background: linear-gradient(to bottom,  @grad1 0%,@grad2 @percent); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='@grad1', endColorstr='@grad2',GradientType=0 ); /* IE6-9 */
}
.gradient-left (@grad1: @ui-color-1; @grad2: @ui-color-2; @percent: @percent) {
	background: @grad1; /* Old browsers */
	background: -moz-linear-gradient(left,  @grad1 0%, @grad2 @percent); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, right top, color-stop(0%,@grad1), color-stop(@percent,@grad2)); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(left,  @grad1 0%,@grad2 @percent); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(left,  @grad1 0%,@grad2 @percent); /* Opera 11.10+ */
	background: -ms-linear-gradient(left,  @grad1 0%,@grad2 @percent); /* IE10+ */
	background: linear-gradient(to right,  @grad1 0%,@grad2 @percent); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='@grad1', endColorstr='@grad2',GradientType=0 ); /* IE6-9 */
}

//! ----- shadow -----
.shadow (@shade: 3px 3px 5px 6px #ccc) {
  -moz-box-shadow:    @shade;
  -webkit-box-shadow: @shade;
  box-shadow:         @shade;
}

//! ----- border radius -----
.radius (@radius: 5px) {
  -webkit-border-radius: @radius;
  -moz-border-radius: @radius;
  -ms-border-radius: @radius;
  -o-border-radius: @radius;
  border-radius: @radius;
}

//! ----- cover styles -----
.cover () {
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	width: 100%;
	height: 100%;
}

//! ------- columns ------
.columns(@colCount: 2; @colGutter: 20px) {
	-moz-column-count: @colCount;
    -moz-column-gap: @colGutter;
    -webkit-column-count: @colCount;
    -webkit-column-gap: @colGutter;
    column-count: @colCount;
    column-gap: @colGutter;
}

//! ----- global styles -----
html, body {
	height: 100%;
	overflow: hidden;
}
body {
	.gradient;
	.global-font;
	background: #fff;
    font-size: 100%;
    background-attachment:fixed;
    font-family:;
    font-size:12px;
    height:100%;
    margin:0px;
    padding:5px 0 0 0;
    width:100%;
    text-align: center;
}

//! ----- input defaults -----
input:focus,
textarea:focus,
select:focus,
button:focus {
	outline: none;
}

//! ----- content container styles -----
.content_container {
	.cover();
	bottom: 43px;
}

.content_wrapper {
	position: relative;
	padding: 1px;
	display: inline-block;
    margin: 5px 5px 0 5px;
    overflow: hidden;

    .shadow(0px 3px 9px rgba(0,0,0,.5));
    .radius(16px);
    .gradient(#131313; #3f3f3f);

	.content {
		position: relative;
	    text-align: center;
	    padding: 18px;
	    display: inline-block;
	    .radius(15px);
	    .gradient(#3f3f3f, #131313);

		iframe {
		    width: 1600px;
		    height: 850px;
		    margin: auto;

		    #document h1 {
			    font-family: Arial;
		    }
		}
	}
}


//! ----- iframe display styles -----
.fullscreen {
	bottom: 43px;
	.content_wrapper {
		margin: 0 0 0 0;
		padding: 0;
		.cover();
		.radius(0);
		.shadow(none);
		.gradient(none);

		.content {
			padding: 0;
			.cover();
			.radius(0px);
			.gradient(none);

			.iframe {
				position: relative;
				width: 100%;
				height: 100%;
			}
		}
	}
}

//! -panel styles
#panel {
	position: fixed;
	bottom: -300px;
	left: 0;
	right: 0;
    padding: 0;
    margin: auto;
    text-align: center;
    .gradient();

	//! --url bar styles
	#url_form {
		position: relative;
		display: block;
	    margin: 5px;
	    padding: 0;
	    height: 33px;
		background: rgba(255,255,255,.85);
		margin-right: 65px;
		.radius(2.2em);
	    .shadow(0px 1px 9px rgba(0,0,0,.5));
	}
	label[for="url_input"] {
		color: lighten(@ui-color-1, 60%);
		display: inline-block;
		position: absolute;
		font-size: 2em;
		left: 10px;
		top: 2px;
		text-shadow: 0 1px 0 white;
	}
	#url_input {
		position: absolute;
		font-family: Helvetica, Arial;
		font-weight: bold;
		text-transform: lowercase;
		font-size: 2em;
		border: none;
		outline: none;
	    margin: 0 0 0 0;
	    padding: 2px 0 2px 45px;
	    background: none;
	    text-align: left;
	    top: 0px;
	    right: 0px;
	    bottom: 0px;
	    left: 0px;
	}

	#frame_reload,
	#frame_history,
	#frame_settings {
		display: inline-block;
		position: absolute;
		top: 1px;
	    background-size: auto 30px !important;
	    background-image: url(../_images/icons/icons-history-settings-refresh.png);
	    background-repeat: no-repeat;
	    width: 30px;
	    height: 30px;
	}
	#frame_reload {
		right: 3px;
		background-position: -60px 0;

		&:hover {
		    cursor: pointer;
		}
		&:active {
		    cursor: pointer;
		}
	}

	#frame_history {
		right: 32px;
		background-position: -30px 0;

		&:hover {
		    cursor: pointer;
		}
		&:active {
		    cursor: pointer;
		}
	}

	#frame_settings {
		right: 62px;
		background-position: 0 0;
	}


	.panel-menu {
		@border-color: lighten(@menu-color-1, 25%);
		.cover();
		padding: 5px;
		display: none;
		.gradient(rgba(0,0,0,.9), rgba(0,0,0,.6));
		z-index: 1000;

		.panel-close {
			position: absolute;
			top: 5px;
			right: 5px;
			width: 30px;
			height: 30px;
			.radius(15px);
			.b-cancel();
			.b-defaults();
			font-size: 2em;
			line-height: 1px;
			padding-bottom: 5px;
		}
		> ul {
			padding: 7px 5px 5px 5px;
		}
	}

	#settings_panel {
		right: 102px;

		.settings {
			fieldset {
				position: relative;
				border-radius: 9px;
				border: none;
				box-shadow: 0 0 1px darken(@menu-color-2, 25%);
				background: lighten(@menu-color-1, 10%);
				padding: 23px 0 9px 0;
				legend {
					position: absolute;
					padding: 3px 5px;
					top: -10px;
					right: 9px;
					text-align: left;
					margin-top: 10px;
					font-size: 1.1em;
					color: lighten(@menu-color-1, 30%);
					text-shadow: 0 1px 1px darken(@menu-color-1, 30%);
					background: darken(@menu-color-1, 30%);
					.radius(0 0 3px 3px);
				}
				> div {
					label {
						display: inline-block;
						width: 50px;
						text-align: left;
						color: darken(@menu-color-1, 30%);
						text-shadow: 0 1px 0 lighten(@menu-color-1, 30%);
						font-size: 1em;
						font-weight: bold;
					}
					input {
						border: none;
						width: 148px;
						padding: 5px;
						.radius(5px);
					}
				}
			}
		}
	}
	#history_panel {
		padding: 0;
		margin: 0;
		.history_list {
			overflow: visible;
			padding: 5px;
			margin: 0;
			vertical-align: top;
			.columns(4, 10px);
			height: 325px;
			li {
				border: 0;
				margin: 0 5px 5px 5px;
				font-size: .9em;
				a {
					text-align: left;
					display: block;
					padding: 9px;
					font-size: 1.2em;
					font-weight: bold;
					text-decoration: none;
					color: white;
					background: rgba(255,255,255,.1);
					padding: 9px;
					text-overflow: ellipsis;
					.radius(9px);
					&:hover {
						background: rgba(255,255,255,.2);
					}
					&:active {
						background: rgba(255,255,255,.3);
					}
				}
			}
		}
	}


	#menu_button {
		position: absolute;
		top: 8px;
		right: 15px;
		width: 37px;
		height: 27px;
		background: url(../_images/menu.png) no-repeat;
	}

	//! -- expanded menu styles
	#mobi_menu {
		@height: 300px;
		height: @height;
		position: relative;

		#mobi_menu_container {

			height: @height;
			position: relative;
			margin-top: 5px;
			margin-right: 65px;
			text-align: left;

			//! ---- card styles
			#mobi_menu_cards {
				position: relative;
				overflow: hidden;

				ol {
					@color1: #eaeaea;
					@color2: #d9d9d9;
					@newcolor1: #c8dbed;
					@newcolor2: #8aa9c6;
					position: relative;
					list-style: none;
					display: block;
					white-space: nowrap;
					width: 100%;
					height: 100%;
					vertical-align: top;
					margin: 0 0 -30px 0;
					padding: 0 0 30px 0;
					overflow-x: scroll;

					//! ------ card styles
					.card {
						@gutter: 5px;
						position: relative;
						display: inline-block;
						margin-right: @gutter;
						margin-top: @gutter;
						vertical-align: top;

						&:first-child {
							margin-left: @gutter;
						}


						> form,
						> div {
							position: relative;
							display: block;
							padding: 0;
							width: @cardW;
							height: @cardH;
							overflow: hidden !important;
							.radius(7px);
							.shadow(0 3px 9px rgba(0,0,0,.4));
							.gradient(@color1; @color2);

							input,
							textarea {
								.radius(0px);
							}
							input:focus,
							textarea:focus {
								background: rgba(255,255,255,.75) !important;
							}

							> div {
								position: relative;
							}

							.delete {
								position: absolute;
								display: inline-block;
								width: 28px;
								height: 28px;
								top: 3px;
								right: 3px;
								font-size: 1.3em;
								line-height: 0px;
								text-align: center;
								text-indent: -1px;
								padding: 0;
								.b-cancel();
								.b-defaults();
								.radius(7px);
							}

							input[name="title"],
							.title {
								font-weight: bold;
								display: block;
								font-size: 1.1em;
								margin: 0;
								padding: 5px;
								border: none;
								border-top: 1px solid rgba(255,255,255,.3);
								border-bottom: 1px solid rgba(0,0,0,.1);
								text-shadow: 0 1px 0 @color1;
								width: @cardW - 10;
								color: darken(@color1, 50%);
								.radius(7px 7px 0 0);
								.gradient(darken(@color1, 10%); darken(@color2, 10%));

								button {
									position: absolute;
									width: 16px;
									height: 16px;
									border: none;
									margin: 0;
									top: 2px;

									&.edit_card {
										background: url(../_images/icons/edit.png) no-repeat;
										background-size: 16px 16px;
										right: 18px;
									}
									&.delete_card {
										.b-cancel();
										.b-defaults();
										.radius(5px);
										width: 22px;
										height: 22px;
										right: 3px;
										font-weight: bold;
										font-size: 1.1em;
										line-height: 1px;
									}
								}
							}


							label[for="page"],
							label[for="issue"] {
								display: inline-block;
								width: 35px;
								font-size: .95em;
								padding-left: 5px;
								color: darken(@color2, 20%);
								text-shadow: 0 1px 0 lighten(@color1, 20%);
							}

							input[name="page"],
							input[name="issue"],
							.page,
							.issue {
								display: inline-block;
								font-size: 1em;
								margin: 0 0 1px -40px;
								padding: 7px 5px 7px 40px;
								border: 1px solid transparent;
								background: transparent;
								font-weight: normal;
								width: @cardW - 47;
							}
							.page,
							.issue {
								display: block;
							}

							button.issue_view {
								position: absolute;
								top: 2px;
								right: -36px;
								width: 24px;
								height: 24px;
								padding-bottom: 6px;
								padding-left: 8px;
								font-size: 1.7em;
								line-height: 1px;
								background: rgba(0,0,0,.1);
								.b-defaults();
								.radius(18px);
							}

							textarea[name="desc"],
							.desc {
								resize: none;
								display: block;
								background: transparent;
								border: none;
								font-size: 1em;
								margin: 0;
								padding: 5px;
								width: @cardW - 10;
								height: @cardH - 136;
								white-space: normal;
								overflow: auto;
							}

							.timer {
								@bg: darken(@color1, 50%);
								position: relative;
								input[name="timer"] {
									font-size: 1em;
									height: 15px;
									display: block;
									text-align: right;
									background: @bg;
									border: none;
									margin: 0;
									padding: 5px;
									width: @cardW - 35;

								}
								input {
									color: @color2;
									text-shadow: 0 1px 1px rgba(0,0,0,.5);
								}
								button {
									.b-ok();
									.b-defaults();
									position: absolute;
									top: 0;
									height: 25px;
									width: 25px;
									font-size: 1.5em;
									line-height: 0px;
									font-weight: bold;
									border: none;
									margin: 0;

									&.start_stop {
										right: 0px;
										border: none;

										&.stop {
											.b-cancel();
											.b-defaults();
											border: none;
										}
									}
								}
							}

							.card_options_menu {
								position: absolute;
								bottom: 0px;
								left: 0px;
								right: 0px;
								height: 33px;
								overflow: hidden;
								z-index: 100;
								border-top: 1px solid rgba(0,0,0,.1);

								button {
									display: inline-block;
									padding: 5px;
									margin: 4px -4px 0 3px;
									.radius(5px);
								}
								button.card-archive,
								button.card-edit {
									.b-ok();
									.b-defaults();
								}
								button.card-delete {
									.b-cancel();
									.b-defaults();
								}
							}
						}
					}

					//! ------ dragging styles
					.dragging {
						> div {
							opacity: .90;
							.shadow(0 9px 25px #000);

						}
					}
				}
			}
		}

		//! --- mobi buttons
		#mobi_menu_buttons {
			height: @height;
			position: absolute;
			top: 0;
			right: 0;
			width: 65px;

			#add_card {
				position: absolute;
				top: 3px;
				left: 5px;
				width: 39px;
				height: 39px;
				font-size: 23px;
				line-height: 0px;
				font-weight: bold;
				margin-bottom: 9px;
				padding-bottom: 7px;
				text-indent: -1px;
				font-size: 3em;

				.radius(27px);

				&[data-state="add"] {
					.b-ok();
					.b-defaults();
				}

				&[data-state="close"] {
					text-indent: -2px;
					.b-cancel();
					.b-defaults();
				}
			}
			#rotate_iframe {
			    position: absolute;
			    width: 20px;
			    height: 20px;
			    top: 33px;
			    right: 5px;
			    .b-ok();
			    .b-defaults();
			    .radius(10px);
			}


			//! ---- device buttons
			#devices {
				margin: 50px 0 0 0;
				display: block;
			    text-align: center;
			    overflow: hidden;

			    ul {
				    list-style: none;
				    margin: 0;
				    padding: 0;
				    li {
					    margin: 0;
					    padding: 0;
					    background: rgba(0,0,0,.1);
					    border-top: 1px solid rgba(0,0,0,.4);
					    border-bottom: 1px solid rgba(255,255,255,.3);
					    margin: 5px;
					    .radius(9px);

						&:active,
						&.active {
						    background: rgba(0,0,0,.4);
						    .shadow(none);
						}
					    div {
					    	display: block;
						    background: url(../_images/web-icons.png) no-repeat;
						    background-size: auto 27px;
						    background-position: 0px 0px;
						    width: 27px;
						    height: 27px;
						    text-indent: -1000px !important;
						    text-decoration: none;
						    padding: 0;
						    margin: 0;
						    overflow: hidden;

							&:first-child {border-left: none;}
							&:last-child {border-right: none;}
					    }

						.desktop {background-position: -115px 0px !important;}
						.ipad {background-position: -57px -4px;}
						.iphone5 {background-position: -28px -4px;}
						.iphone4 {background-position: 0px -4px;}

				    }
			    }
			}
		}
	}
}

//! - history menu
#history_menu {
	display: none;
    text-align: left;
    padding: 9px;
    bottom: 57px;
    right: 15px;
    width: 300px;
    background: rgba(0,0,0,.8);
    border-radius: 0 1em 0 1em;
    padding: 20px;

	ul {
		list-style: none;
		margin: 0;
		padding: 0;
	    max-height: 300px;
	    overflow: auto;

		li {

			div {
				display: block;
				color: #fff;
				font-size: 1.2em;
				font-weight: bold;
				text-shadow: 0px 1px 3px #000;
				padding: 5px 0 5px 0;
			}
		}
	}
}

//! - rotate loading
.rotateFromTo () {
	from {-webkit-transform: rotate(0deg);}
	to {-webkit-transform: rotate(360deg);}
}

@-webkit-keyframes rotate {.rotateFromTo;}
@-moz-keyframes rotate {.rotateFromTo;}
@-ms-keyframes rotate {.rotateFromTo;}
@-o-keyframes rotate {.rotateFromTo;}
@keyframes rotate {.rotateFromTo;}

.loading {
	display: none;
	position: absolute;
	background: url(../_images/loading.png) no-repeat center center;
	width: 100px;
	height: 100px;
	top: 50%;
	margin-top: -50px;
	left: 50%;
	margin-left: -50px;
	-webkit-animation-name:             rotate;
	-webkit-animation-duration:         1.2s;
	-webkit-animation-iteration-count:  infinite;
	-webkit-animation-timing-function: linear;

}

//! - modal styles
#modal {
	position: absolute;
	display: none;
	background: rgba(0,0,0,.75);
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	height: 100%;


	#modal_error {
		display: none;
		position: absolute;
		width: 200px;
		height: 100px;
		top: 50%;
		margin-top: -50px;
		left: 50%;
		margin-left: -100px;
		background: white;
		.radius(5px);
	}
}

//! - redmine issue
#redmine_issue {
	display: none;
	position: absolute;
	width: 400px;
	height: 600px;
	background: white;
	top: 50%;
	margin-top: -336px;
	left: 50%;
	margin-left: -200px;
	text-align: left;
	padding: 36px;
	font-size: 1.2em;
	overflow: hidden;
	z-index: 100000;
	.shadow(0 6px 21px rgba(0,0,0,.7));
	.radius(5px);
	border-top: 1px solid lighten(@ui-color-1, 20%);

	> div:before {
		display: inline-block;
		font-size: .9em;
		width: 80px;
		color: darken(white, 30%);
	}
	> div {
		padding: 5px 0 5px 0;
	}

	.subject {
		font-size: 1.5em;
		margin-top: 9px;
	}
	.author:before {
		content: 'author';
	}

	.assigned_to:before {
		content: 'assigned';
	}

	.author {
	}
	.created:before {
		content: 'created';
	}
	.status:before {
		content: 'status';
	}
	.tracker:before {
		content: 'tracker';
	}
	.description:before {
		content: 'description';
		margin-left: -80px;
		clear: both;
	}
	.description {
		margin-left: 80px;
	}

	.journal {
		border-top: 1px solid darken(white, 30%);
		height: 345px;
		overflow: auto;
		margin-top: 18px;

		.journal_item {
			border-top: 1px solid darken(white, 10%);
			padding-top: 18px;
			padding-bottom: 18px;

			&:first-child {
				border-top: none;
			}
			> h1 {
				font-weight: normal;
				font-size: 1.2em;
				margin: 0;
				padding: 0;
			}
			> h2 {
				font-weight: normal;
				font-size: .8em;
				margin: 0;
				padding: 0;
				color: darken(white, 30%) !important;
			}
			> p {
				padding: 0;
				margin: 0;
			}
		}
	}

	.toolbar {
		position: absolute;
		top: 0;
		right: 0;
		left: 0;
		height: 36px;
		padding: 3px 2px 3px 2px;
		.b-ok();
		.gradient(@ui-color-1, @ui-color-2);

		button {
			border: none;
			position: relative;
			height: 100%;
			padding: 0 9px 0 9px;
			color: rgba(255,255,255,.6);
			background: rgba(0,0,0,.2);
			border-top: 1px solid rgba(255,255,255,.2);
			border-bottom: 1px solid rgba(0,0,0,.2);
			.radius(3px);

			&.close_issue {
				position: absolute;
				top: 5px;
				right: 5px;
				width: 30px;
				height: 30px;
				font-size: 1.5em;
				padding: 0;
				margin: 0;
				background: none;
				border: none;
			}
		}
	}
}

